const addTocartForms = document.querySelectorAll('form[action="/cart/add"]') 

addTocartForms.forEach((form) => {
    form.addEventListener("submit", async (event) => { 
        // prvent noraml submision 
        event.preventDefault();
        // submit the form with ajax
        await fetch  ('/cart/add, {
            method: 'post',
            body: new FormData(form),
        });

        // get the cart data  
        const res = await fetch("/cart.json");
        const cart = await res.json();
        console.log(cart);

        // update the cart count    
        const cartCount = document.querySelector(".cart-count");



        });
        });
 














    //     form.addEventListener('submit', e => {
//         e.preventDefault()
//         const formData = new FormData(form)
//         const body = JSON.stringify(Object.fromEntries(formData))
//         fetch('/cart/add.js', {
//             method: 'POST',
//             headers: {
//                 'Content-Type': 'application/json'
//             },
//             body
//         })
//         .then(res => res.json())
//         .then(data => {
//             console.log('Success:', data) // Add console message for success
//             const cart = document.querySelector('.cart')
//             cart.classList.add('cart--active')
//             setTimeout(() => {
//                 cart.classList.remove('cart--active')
//             }, 3000)
//         })
//     })
// })
